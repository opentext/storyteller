





:Home: `[home] </tdt/public/index.html>`_
:Author: 10.175.30.123 user
:Date: 2014-11-05 21:31:13
:Test: `[link] </tdt/static/index.html?id=kktvlw>`_

.. contents:: `Table of contents`
  :local:
  :backlinks: top

Test case definition
====================
Source Data
-----------

See `source.xml <source.xml>`_.

.. code:: xml
   :number-lines:
   :name: source 

   <CATALOG>
      <CD>
        <TITLE>Empire Burlesque</TITLE>
        <ARTIST>Bob Dylan</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1985</YEAR>
      </CD>
      <CD>
        <TITLE>Hide your heart</TITLE>
        <ARTIST>Bonnie Tyler</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS Records</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1988</YEAR>
      </CD>
      <CD>
        <TITLE>Greatest Hits</TITLE>
        <ARTIST>Dolly Parton</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>RCA</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1982</YEAR>
      </CD>
      <CD>
        <TITLE>Still got the blues</TITLE>
        <ARTIST>Gary Moore</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Virgin records</COMPANY>
        <PRICE>10.20</PRICE>
        <YEAR>1990</YEAR>
      </CD>
      <CD>
        <TITLE>Eros</TITLE>
        <ARTIST>Eros Ramazzotti</ARTIST>
        <COUNTRY>EU</COUNTRY>
        <COMPANY>BMG</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1997</YEAR>
      </CD>
      <CD>
        <TITLE>One night only</TITLE>
        <ARTIST>Bee Gees</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Polydor</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1998</YEAR>
      </CD>
      <CD>
        <TITLE>Sylvias Mother</TITLE>
        <ARTIST>Dr.Hook</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>CBS</COMPANY>
        <PRICE>8.10</PRICE>
        <YEAR>1973</YEAR>
      </CD>
      <CD>
        <TITLE>Maggie May</TITLE>
        <ARTIST>Rod Stewart</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Pickwick</COMPANY>
        <PRICE>8.50</PRICE>
        <YEAR>1990</YEAR>
      </CD>
      <CD>
        <TITLE>Romanza</TITLE>
        <ARTIST>Andrea Bocelli</ARTIST>
        <COUNTRY>EU</COUNTRY>
        <COMPANY>Polydor</COMPANY>
        <PRICE>10.80</PRICE>
        <YEAR>1996</YEAR>
      </CD>
      <CD>
        <TITLE>When a man loves a woman</TITLE>
        <ARTIST>Percy Sledge</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Atlantic</COMPANY>
        <PRICE>8.70</PRICE>
        <YEAR>1987</YEAR>
      </CD>
      <CD>
        <TITLE>Black angel</TITLE>
        <ARTIST>Savage Rose</ARTIST>
        <COUNTRY>EU</COUNTRY>
        <COMPANY>Mega</COMPANY>
        <PRICE>10.90</PRICE>
        <YEAR>1995</YEAR>
      </CD>
      <CD>
        <TITLE>1999 Grammy Nominees</TITLE>
        <ARTIST>Many</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Grammy</COMPANY>
        <PRICE>10.20</PRICE>
        <YEAR>1999</YEAR>
      </CD>
      <CD>
        <TITLE>For the good times</TITLE>
        <ARTIST>Kenny Rogers</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Mucik Master</COMPANY>
        <PRICE>8.70</PRICE>
        <YEAR>1995</YEAR>
      </CD>
      <CD>
        <TITLE>Big Willie style</TITLE>
        <ARTIST>Will Smith</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Columbia</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1997</YEAR>
      </CD>
      <CD>
        <TITLE>Tupelo Honey</TITLE>
        <ARTIST>Van Morrison</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Polydor</COMPANY>
        <PRICE>8.20</PRICE>
        <YEAR>1971</YEAR>
      </CD>
      <CD>
        <TITLE>Soulsville</TITLE>
        <ARTIST>Jorn Hoel</ARTIST>
        <COUNTRY>Norway</COUNTRY>
        <COMPANY>WEA</COMPANY>
        <PRICE>7.90</PRICE>
        <YEAR>1996</YEAR>
      </CD>
      <CD>
        <TITLE>The very best of</TITLE>
        <ARTIST>Cat Stevens</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Island</COMPANY>
        <PRICE>8.90</PRICE>
        <YEAR>1990</YEAR>
      </CD>
      <CD>
        <TITLE>Stop</TITLE>
        <ARTIST>Sam Brown</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>A and M</COMPANY>
        <PRICE>8.90</PRICE>
        <YEAR>1988</YEAR>
      </CD>
      <CD>
        <TITLE>Bridge of Spies</TITLE>
        <ARTIST>T'Pau</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Siren</COMPANY>
        <PRICE>7.90</PRICE>
        <YEAR>1987</YEAR>
      </CD>
      <CD>
        <TITLE>Private Dancer</TITLE>
        <ARTIST>Tina Turner</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>Capitol</COMPANY>
        <PRICE>8.90</PRICE>
        <YEAR>1983</YEAR>
      </CD>
      <CD>
        <TITLE>Midt om natten</TITLE>
        <ARTIST>Kim Larsen</ARTIST>
        <COUNTRY>EU</COUNTRY>
        <COMPANY>Medley</COMPANY>
        <PRICE>7.80</PRICE>
        <YEAR>1983</YEAR>
      </CD>
      <CD>
        <TITLE>Pavarotti Gala Concert</TITLE>
        <ARTIST>Luciano Pavarotti</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>DECCA</COMPANY>
        <PRICE>9.90</PRICE>
        <YEAR>1991</YEAR>
      </CD>
      <CD>
        <TITLE>The dock of the bay</TITLE>
        <ARTIST>Otis Redding</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>Atlantic</COMPANY>
        <PRICE>7.90</PRICE>
        <YEAR>1987</YEAR>
      </CD>
      <CD>
        <TITLE>Picture book</TITLE>
        <ARTIST>Simply Red</ARTIST>
        <COUNTRY>EU</COUNTRY>
        <COMPANY>Elektra</COMPANY>
        <PRICE>7.20</PRICE>
        <YEAR>1985</YEAR>
      </CD>
      <CD>
        <TITLE>Red</TITLE>
        <ARTIST>The Communards</ARTIST>
        <COUNTRY>UK</COUNTRY>
        <COMPANY>London</COMPANY>
        <PRICE>7.80</PRICE>
        <YEAR>1987</YEAR>
      </CD>
      <CD>
        <TITLE>Unchain my heart</TITLE>
        <ARTIST>Joe Cocker</ARTIST>
        <COUNTRY>USA</COUNTRY>
        <COMPANY>EMI</COMPANY>
        <PRICE>8.20</PRICE>
        <YEAR>1987</YEAR>
      </CD>
    </CATALOG>
    




Data Template
-------------

See `template.xml <template.xml>`_.

.. code:: xml
   :number-lines:
   :name: template 

   <html>
      <head>
        <title>Feed jqGrid from embedded XML data island</title>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"/>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/jquery.jqGrid.min.js"/>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/i18n/grid.locale-en.js"/>
        <link rel="stylesheet" type="text/css" media="screen" href="https://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css"/>
        <link rel="stylesheet" type="text/css" media="screen" href="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/css/ui.jqgrid.css"/>
        <script id="catalog" type="application/xml">
          <CATALOG>
            <CD>
              <TITLE>?</TITLE>
              <ARTIST>?</ARTIST>
              <COUNTRY>?</COUNTRY>
              <COMPANY>?</COMPANY>
              <PRICE>?</PRICE>
              <YEAR>?</YEAR>
            </CD>
          </CATALOG>
        </script>
        <script type="text/javascript">
      function getRow( cds, id, columns ) {
        var result = { "ID" : id };
        columns.forEach( function(key) {
          result[key] = cds[id].getElementsByTagName(key)[0].childNodes[0].nodeValue;
        } );
        return result;
      }
    
      function initGrid( grid )
      {
        grid.jqGrid({
                    datatype: "local",
                    height: 350,
                    colNames: ['CD No', 'Artist', 'Country', 'Company', 'Price', 'Year' ],
                    colModel: [
                        { name: 'ID', width: 60, sorttype: "int" },
                        { name: 'ARTIST', width: 100 },
                        { name: 'COUNTRY', width: 100 },
                        { name: 'COMPANY', width: 100 },
                        { name: 'PRICE', width: 80, align: "right", sorttype: "float" },
                        { name: 'YEAR', width: 90, sorttype: "date" },
                    ],
                    multiselect: true,
                    caption: "Feed jqGrid from embedded XML data island",
                });
    
        var catalogSource = document.getElementById("catalog").textContent;
        var parser = new DOMParser();
        var xmldoc = parser.parseFromString(catalogSource, "application/xml");
        var cds = xmldoc.getElementsByTagName("CD");
        var columns = [ "TITLE", "ARTIST", "COUNTRY", "COMPANY", "PRICE", "YEAR" ];
        for (i=0;i&lt;cds.length;i++)
        {
          var row = getRow( cds, i, columns );
          grid.jqGrid('addRowData', i, row );
        }
      }
    
      $(document).ready( function() {
        initGrid( $("#jqGrid") );
      } );
    </script>
      </head>
      <body>
        <table id="jqGrid"/>
      </body>
    </html>
    




Transformation
--------------

See `transformation.xml <transformation.xml>`_.

.. code:: xml
   :number-lines:
   :name: transformation 

   <tdt:transformation xmlns:tdt="http://opentext.com/streamserve/docplatform/transformation" version="1.0">
      <tdt:rule path="//script[@id='catalog']">
        <tdt:value key=".">.</tdt:value>
        <tdt:value key="recurse">.</tdt:value>
      </tdt:rule>
    </tdt:transformation>
    




Compiled Transformation
-----------------------

See `compiled.xml <compiled.xml>`_.

.. code:: xml
   :number-lines:
   :name: compiled 

   <tdt:transformation xmlns:tdt="http://opentext.com/streamserve/docplatform/transformation" version="1.0">
      <tdt:rule path="/html/head/script[4]">
        <tdt:value key=".">.</tdt:value>
        <tdt:value key="@id">@id</tdt:value>
        <tdt:value key="@type">@type</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG">
        <tdt:value key=".">CATALOG</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD">
        <tdt:value key=".">CD</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD/ARTIST">
        <tdt:value key=".">ARTIST</tdt:value>
        <tdt:value key="text()">text()</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD/COMPANY">
        <tdt:value key=".">COMPANY</tdt:value>
        <tdt:value key="text()">text()</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD/COUNTRY">
        <tdt:value key=".">COUNTRY</tdt:value>
        <tdt:value key="text()">text()</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD/PRICE">
        <tdt:value key=".">PRICE</tdt:value>
        <tdt:value key="text()">text()</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD/TITLE">
        <tdt:value key=".">TITLE</tdt:value>
        <tdt:value key="text()">text()</tdt:value>
      </tdt:rule>
      <tdt:rule path="/html/head/script[4]/CATALOG/CD/YEAR">
        <tdt:value key=".">YEAR</tdt:value>
        <tdt:value key="text()">text()</tdt:value>
      </tdt:rule>
    </tdt:transformation>
    




Data Instance
-------------

See `instance.xml <instance.xml>`_.

.. code:: xml
   :number-lines:
   :name: instance 

   <html>
      <head>
        <title>Feed jqGrid from embedded XML data island</title>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"/>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/jquery.jqGrid.min.js"/>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/i18n/grid.locale-en.js"/>
        <link rel="stylesheet" type="text/css" media="screen" href="https://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css"/>
        <link rel="stylesheet" type="text/css" media="screen" href="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/css/ui.jqgrid.css"/>
        <script>
          <CATALOG>
            <CD>
              <TITLE>Empire Burlesque</TITLE>
              <ARTIST>Bob Dylan</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>Columbia</COMPANY>
              <PRICE>10.90</PRICE>
              <YEAR>1985</YEAR>
            </CD>
            <CD>
              <TITLE>Hide your heart</TITLE>
              <ARTIST>Bonnie Tyler</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>CBS Records</COMPANY>
              <PRICE>9.90</PRICE>
              <YEAR>1988</YEAR>
            </CD>
            <CD>
              <TITLE>Greatest Hits</TITLE>
              <ARTIST>Dolly Parton</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>RCA</COMPANY>
              <PRICE>9.90</PRICE>
              <YEAR>1982</YEAR>
            </CD>
            <CD>
              <TITLE>Still got the blues</TITLE>
              <ARTIST>Gary Moore</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Virgin records</COMPANY>
              <PRICE>10.20</PRICE>
              <YEAR>1990</YEAR>
            </CD>
            <CD>
              <TITLE>Eros</TITLE>
              <ARTIST>Eros Ramazzotti</ARTIST>
              <COUNTRY>EU</COUNTRY>
              <COMPANY>BMG</COMPANY>
              <PRICE>9.90</PRICE>
              <YEAR>1997</YEAR>
            </CD>
            <CD>
              <TITLE>One night only</TITLE>
              <ARTIST>Bee Gees</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Polydor</COMPANY>
              <PRICE>10.90</PRICE>
              <YEAR>1998</YEAR>
            </CD>
            <CD>
              <TITLE>Sylvias Mother</TITLE>
              <ARTIST>Dr.Hook</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>CBS</COMPANY>
              <PRICE>8.10</PRICE>
              <YEAR>1973</YEAR>
            </CD>
            <CD>
              <TITLE>Maggie May</TITLE>
              <ARTIST>Rod Stewart</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Pickwick</COMPANY>
              <PRICE>8.50</PRICE>
              <YEAR>1990</YEAR>
            </CD>
            <CD>
              <TITLE>Romanza</TITLE>
              <ARTIST>Andrea Bocelli</ARTIST>
              <COUNTRY>EU</COUNTRY>
              <COMPANY>Polydor</COMPANY>
              <PRICE>10.80</PRICE>
              <YEAR>1996</YEAR>
            </CD>
            <CD>
              <TITLE>When a man loves a woman</TITLE>
              <ARTIST>Percy Sledge</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>Atlantic</COMPANY>
              <PRICE>8.70</PRICE>
              <YEAR>1987</YEAR>
            </CD>
            <CD>
              <TITLE>Black angel</TITLE>
              <ARTIST>Savage Rose</ARTIST>
              <COUNTRY>EU</COUNTRY>
              <COMPANY>Mega</COMPANY>
              <PRICE>10.90</PRICE>
              <YEAR>1995</YEAR>
            </CD>
            <CD>
              <TITLE>1999 Grammy Nominees</TITLE>
              <ARTIST>Many</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>Grammy</COMPANY>
              <PRICE>10.20</PRICE>
              <YEAR>1999</YEAR>
            </CD>
            <CD>
              <TITLE>For the good times</TITLE>
              <ARTIST>Kenny Rogers</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Mucik Master</COMPANY>
              <PRICE>8.70</PRICE>
              <YEAR>1995</YEAR>
            </CD>
            <CD>
              <TITLE>Big Willie style</TITLE>
              <ARTIST>Will Smith</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>Columbia</COMPANY>
              <PRICE>9.90</PRICE>
              <YEAR>1997</YEAR>
            </CD>
            <CD>
              <TITLE>Tupelo Honey</TITLE>
              <ARTIST>Van Morrison</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Polydor</COMPANY>
              <PRICE>8.20</PRICE>
              <YEAR>1971</YEAR>
            </CD>
            <CD>
              <TITLE>Soulsville</TITLE>
              <ARTIST>Jorn Hoel</ARTIST>
              <COUNTRY>Norway</COUNTRY>
              <COMPANY>WEA</COMPANY>
              <PRICE>7.90</PRICE>
              <YEAR>1996</YEAR>
            </CD>
            <CD>
              <TITLE>The very best of</TITLE>
              <ARTIST>Cat Stevens</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Island</COMPANY>
              <PRICE>8.90</PRICE>
              <YEAR>1990</YEAR>
            </CD>
            <CD>
              <TITLE>Stop</TITLE>
              <ARTIST>Sam Brown</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>A and M</COMPANY>
              <PRICE>8.90</PRICE>
              <YEAR>1988</YEAR>
            </CD>
            <CD>
              <TITLE>Bridge of Spies</TITLE>
              <ARTIST>T'Pau</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Siren</COMPANY>
              <PRICE>7.90</PRICE>
              <YEAR>1987</YEAR>
            </CD>
            <CD>
              <TITLE>Private Dancer</TITLE>
              <ARTIST>Tina Turner</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>Capitol</COMPANY>
              <PRICE>8.90</PRICE>
              <YEAR>1983</YEAR>
            </CD>
            <CD>
              <TITLE>Midt om natten</TITLE>
              <ARTIST>Kim Larsen</ARTIST>
              <COUNTRY>EU</COUNTRY>
              <COMPANY>Medley</COMPANY>
              <PRICE>7.80</PRICE>
              <YEAR>1983</YEAR>
            </CD>
            <CD>
              <TITLE>Pavarotti Gala Concert</TITLE>
              <ARTIST>Luciano Pavarotti</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>DECCA</COMPANY>
              <PRICE>9.90</PRICE>
              <YEAR>1991</YEAR>
            </CD>
            <CD>
              <TITLE>The dock of the bay</TITLE>
              <ARTIST>Otis Redding</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>Atlantic</COMPANY>
              <PRICE>7.90</PRICE>
              <YEAR>1987</YEAR>
            </CD>
            <CD>
              <TITLE>Picture book</TITLE>
              <ARTIST>Simply Red</ARTIST>
              <COUNTRY>EU</COUNTRY>
              <COMPANY>Elektra</COMPANY>
              <PRICE>7.20</PRICE>
              <YEAR>1985</YEAR>
            </CD>
            <CD>
              <TITLE>Red</TITLE>
              <ARTIST>The Communards</ARTIST>
              <COUNTRY>UK</COUNTRY>
              <COMPANY>London</COMPANY>
              <PRICE>7.80</PRICE>
              <YEAR>1987</YEAR>
            </CD>
            <CD>
              <TITLE>Unchain my heart</TITLE>
              <ARTIST>Joe Cocker</ARTIST>
              <COUNTRY>USA</COUNTRY>
              <COMPANY>EMI</COMPANY>
              <PRICE>8.20</PRICE>
              <YEAR>1987</YEAR>
            </CD>
          </CATALOG>
        </script>
        <script type="text/javascript"> 
      function getRow( cds, id, columns ) {
        var result = { "ID" : id };
        columns.forEach( function(key) {
          result[key] = cds[id].getElementsByTagName(key)[0].childNodes[0].nodeValue;
        } );
        return result;
      }
    
      function initGrid( grid )
      {
        grid.jqGrid({
                    datatype: "local",
                    height: 350,
                    colNames: ['CD No', 'Artist', 'Country', 'Company', 'Price', 'Year' ],
                    colModel: [
                        { name: 'ID', width: 60, sorttype: "int" },
                        { name: 'ARTIST', width: 100 },
                        { name: 'COUNTRY', width: 100 },
                        { name: 'COMPANY', width: 100 },
                        { name: 'PRICE', width: 80, align: "right", sorttype: "float" },
                        { name: 'YEAR', width: 90, sorttype: "date" },
                    ],
                    multiselect: true,
                    caption: "Feed jqGrid from embedded XML data island",
                });
    
        var catalogSource = document.getElementById("catalog").textContent;
        var parser = new DOMParser();
        var xmldoc = parser.parseFromString(catalogSource, "application/xml");
        var cds = xmldoc.getElementsByTagName("CD");
        var columns = [ "TITLE", "ARTIST", "COUNTRY", "COMPANY", "PRICE", "YEAR" ];
        for (i=0;i&lt;cds.length;i++)
        {
          var row = getRow( cds, i, columns );
          grid.jqGrid('addRowData', i, row );
        }
      }
    
      $(document).ready( function() {
        initGrid( $("#jqGrid") );
      } );
    </script>
      </head>
      <body>
        <table id="jqGrid"/>
      </body>
    </html>
    




